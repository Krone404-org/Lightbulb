apiVersion: v1
kind: ConfigMap
metadata:
  name: banking-app-config
data:
  POSTGRES_DB: "banking-app"
  POSTGRES_USER: "postgres"
  POSTGRES_PASSWORD: "postgres"
  DATABASE_URL: "postgresql://postgres:postgres@banking-app-db:5432/banking-app"
  DEBUG: "1"
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
data:
  nginx.conf: |
    upstream django_app {
        server banking-app-web:8000;
    }
    server {
        listen 80;
        server_name localhost;
        location / {
            proxy_pass http://django_app;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header Host $host;
            proxy_redirect off;
        }
    }
